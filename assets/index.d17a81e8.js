var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,a=Object.prototype.propertyIsEnumerable,n=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,s=(e,s)=>{for(var r in s||(s={}))t.call(s,r)&&n(e,r,s[r]);if(o)for(var r of o(s))a.call(s,r)&&n(e,r,s[r]);return e};import{c as r,M as l,a as i,b as c,d as u,r as d,e as m,o as p,f,g as h,w as g,h as _,t as E,T as k,i as S,j as y,F as T,k as v,l as O,m as b,n as I,p as w,q as L}from"./vendor.6a843411.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(o){const a=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((o,s)=>{const r=new URL(e,a);if(self[t].moduleMap[r])return o(self[t].moduleMap[r]);const l=new Blob([`import * as m from '${r}';`,`${t}.moduleMap['${r}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){s(new Error(`Failed to import: ${e}`)),n(i)},onload(){o(self[t].moduleMap[r]),n(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("/assets/");const R=r("auth"),A={components:{Menu:l,MenuButton:i,MenuItems:c,MenuItem:u,ChevronDownIcon:d},data:()=>({}),computed:s({},R.mapGetters({profile:"profile",isAuthenticated:"isAuthenticated"})),methods:s(s({},R.mapActions({logout:"logout"})),{handleLogout(){this.logout().then((()=>{this.$router.push({name:"Home"})}))}})},x={class:"px-4 py-1 bg-gray-900"},C={class:"container flex place-items-center justify-between mx-auto"},N=h("img",{class:"w-auto",src:"/assets/logo.71618444.svg",alt:"Problematic Evaly"},null,-1),P={class:"py-2"},D={class:"list-none"},K={key:0,class:"inline-block"},U=_("Login"),V={class:"px-1 py-1"},j=_(" Profile "),M=_(" Orders "),F={class:"px-1 py-1"};A.render=function(e,t,o,a,n,s){const r=m("router-link"),l=m("ChevronDownIcon"),i=m("MenuButton"),c=m("MenuItem"),u=m("MenuItems"),d=m("Menu");return p(),f("header",x,[h("div",C,[h("div",null,[h(r,{to:{name:"Home"},class:"block w-20"},{default:g((()=>[N])),_:1})]),h("nav",P,[h("ul",D,[e.isAuthenticated?(p(),f(d,{key:1,as:"li",class:"relative inline-block z-50"},{default:g((()=>[h(i,{class:"inline-flex justify-center w-full px-3 py-1 text-sm text-white bg-red-700 rounded-full focus:outline-none"},{default:g((()=>[_(" Welcome, "+E(e.profile.first_name)+" ",1),h(l,{class:"w-5 h-5 ml-2 -mr-1","aria-hidden":"true"})])),_:1}),h(k,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:g((()=>[h(u,{class:"absolute right-0 w-56 mt-2 origin-top-right bg-white divide-y divide-gray-100 rounded-md shadow-sm ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:g((()=>[h("div",V,[h(c,null,{default:g((({active:e})=>[h(r,{to:"/profile",class:[e?"bg-red-700 text-white":"text-gray-900","block transition-all ease-in-out duration-200 rounded-md px-4 py-2 text-sm"]},{default:g((()=>[j])),_:2},1032,["class"])])),_:1}),h(c,null,{default:g((({active:e})=>[h(r,{to:{name:"Orders"},class:[e?"bg-red-700 text-white":"text-gray-900","block transition-all ease-in-out duration-200 rounded-md px-4 py-2 text-sm"]},{default:g((()=>[M])),_:2},1032,["class"])])),_:1})]),h("div",F,[h(c,null,{default:g((({active:e})=>[h("button",{class:[e?"bg-red-700 text-white":"text-gray-900","block w-full text-left transition-all ease-in-out duration-200 rounded-md px-4 py-2 text-sm"],onClick:t[1]||(t[1]=(...e)=>s.handleLogout&&s.handleLogout(...e))}," Logout ",2)])),_:1})])])),_:1})])),_:1})])),_:1})):(p(),f("li",K,[h(r,{to:{name:"Login"},class:"inline-block transition-all text-sm text-white py-1 px-3 bg-red-700 rounded-full"},{default:g((()=>[U])),_:1})]))])])])])};const H={};H.render=function(e,t,o,a,n,s){return S(e.$slots,"default")};const G={},Y=y('<div class="py-5"></div><div class="text-center text-gray-500 bg-white text-sm py-3 fixed left-0 bottom-0 right-0"> Crafted by <a class="border-b-2 text-red-700" href="https://www.facebook.com/AminulBD">Aminul Islam</a>, Hosted in <a class="border-b-2 text-red-700" href="https://pages.github.com/">GitHub Pages</a> and fucking source code can be found <a class="border-b-2 text-red-700" href="https://github.com/AminulBD/evaly.me"> here</a>. </div>',2);G.render=function(e,t,o,a,n,s){return Y};const $={};$.render=function(e,t){const o=m("router-view");return p(),f(o)};const B=r("auth"),z={components:{Header:A,Content:H,Footer:G,DefaultView:$},data:()=>({}),computed:s({},B.mapGetters({refreshToken:"refreshToken",tokenValidity:"tokenValidity"})),mounted(){setInterval((()=>{(new Date).getTime()>parseInt(this.tokenValidity)&&this.refreshSession(this.refreshToken)}),5e3)},methods:s({},B.mapActions({refreshSession:"refreshToken"}))};let q;z.render=function(e,t,o,a,n,s){const r=m("Header"),l=m("DefaultView"),i=m("Content"),c=m("Footer");return p(),f(T,null,[h(r),h(i,null,{default:g((()=>[h(l)])),_:1}),h(c)],64)};const J={},W=function(e,t){if(!t)return e();if(void 0===q){const e=document.createElement("link").relList;q=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in J)return;J[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":q,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((e,t)=>{a.addEventListener("load",e),a.addEventListener("error",t)})):void 0}))).then((()=>e()))},Q=[{path:"/",name:"Home",component:()=>W((()=>__import__("./Home.51f562b8.js")),["/assets/Home.51f562b8.js","/assets/vendor.6a843411.js"])},{path:"/profile",name:"Profile",component:()=>W((()=>__import__("./Profile.698b8278.js")),["/assets/Profile.698b8278.js","/assets/vendor.6a843411.js"])},{path:"/orders",name:"Orders",component:()=>W((()=>__import__("./Orders.1f9c8998.js")),["/assets/Orders.1f9c8998.js","/assets/vendor.6a843411.js"])},{path:"/auth",name:"Auth",component:$,children:[{path:"login",name:"Login",component:()=>W((()=>__import__("./Login.73da0df8.js")),["/assets/Login.73da0df8.js","/assets/Login.5e385bb0.css","/assets/vendor.6a843411.js"])}]}],X=v({history:O(),routes:Q}),Z=b.create({baseURL:"https://evaly.aminul.workers.dev",timeout:6e4});localStorage.ACCESS_TOKEN&&localStorage.ACCESS_TOKEN.length>5&&(Z.defaults.headers.common.Authorization="Bearer "+localStorage.ACCESS_TOKEN),Z.defaults.headers.get.Accept="application/json",Z.defaults.headers.post.Accept="application/json",Z.defaults.headers.post["Content-Type"]="application/json";const ee={first_name:"Guest",last_name:"User"};var te=I({modules:{auth:{namespaced:!0,state:(()=>{const e=localStorage.ACCESS_TOKEN,t=localStorage.REFRESH_TOKEN,o=localStorage.TOKEN_VALIDITY,a=localStorage.USER_PROFILE;return{profile:a&&a.length>3?JSON.parse(a):ee,accessToken:e||null,refreshToken:t||null,tokenValidity:o||null,isAuthenticated:e&&e.length>4}})(),mutations:{LOGIN_USER:(e,t)=>{e.accessToken=t.accessToken,e.refreshToken=t.refreshToken,e.tokenValidity=t.tokenValidity,e.isAuthenticated=t.accessToken&&t.accessToken.length>4},MAKE_PROFILE:(e,t)=>{e.profile=t},LOGOUT_USER:e=>{e.profile=ee,e.accessToken=null,e.refreshToken=null,e.isAuthenticated=!1}},actions:{login:({dispatch:e,commit:t},o)=>Z.post("/eauth/api/v1/auth/login",o).then((({data:o})=>{const a=(new Date).getTime()+2e6;localStorage.ACCESS_TOKEN=o.data.access_token,localStorage.REFRESH_TOKEN=o.data.refresh_token,localStorage.TOKEN_VALIDITY=a,t("LOGIN_USER",{accessToken:o.data.access_token,refreshToken:o.data.refresh_token,tokenValidity:a}),e("fetchProfile",o.data.access_token)})),refreshToken:({dispatch:e,commit:t},o=null)=>(o=null!==o?o:localStorage.REFRESH_TOKEN,Z.post("/eauth/api/v1/auth/token/refresh",{refresh_token:o}).then((({data:o})=>{const a=(new Date).getTime()+2e6;localStorage.ACCESS_TOKEN=o.data.access_token,localStorage.REFRESH_TOKEN=o.data.refresh_token,localStorage.TOKEN_VALIDITY=a,t("LOGIN_USER",{accessToken:o.data.access_token,refreshToken:o.data.refresh_token,tokenValidity:a}),e("fetchProfile",o.data.access_token)}))),fetchProfile:({commit:e},t=null)=>(t&&t.length>0&&(Z.defaults.headers.common.Authorization="Bearer "+t),Z.get("/eauth/api/v1/auth/profile").then((({data:t})=>{localStorage.USER_PROFILE=JSON.stringify(t.data),e("MAKE_PROFILE",t.data)}))),logout:({commit:e})=>(localStorage.removeItem("ACCESS_TOKEN"),localStorage.removeItem("REFRESH_TOKEN"),localStorage.removeItem("USER_PROFILE"),localStorage.removeItem("TOKEN_VALIDITY"),e("LOGOUT_USER"),Z.post("/eauth/api/v1/auth/logout").then((()=>{localStorage.removeItem("ACCESS_TOKEN"),localStorage.removeItem("REFRESH_TOKEN"),localStorage.removeItem("USER_PROFILE"),localStorage.removeItem("TOKEN_VALIDITY"),e("LOGOUT_USER")})))},getters:{profile:e=>e.profile,isAuthenticated:e=>e.isAuthenticated,accessToken:e=>e.accessToken,refreshToken:e=>e.refreshToken,tokenValidity:e=>e.tokenValidity}}}});const oe=w(z);oe.mixin({methods:{formatDate:e=>L(e).format("DD/MM/YYYY hh:mm A"),workingDays(e,t=null){const o=L(e).diff(t||L(),"day");return Math.abs(o)}}}),oe.use(te),oe.use(X),oe.mount("#app");export{Z as c};
