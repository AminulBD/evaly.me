var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,o=Object.prototype.propertyIsEnumerable,n=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,r=(e,r)=>{for(var s in r||(r={}))t.call(r,s)&&n(e,s,r[s]);if(a)for(var s of a(r))o.call(r,s)&&n(e,s,r[s]);return e};import{c as s,M as l,a as i,b as c,d,r as u,e as m,o as h,f,g as p,w as g,h as E,t as y,T as _,i as k,j as S,F as b,k as T,l as O,m as v,n as A,p as I,q as L}from"./vendor.6a843411.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const o=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,r)=>{const s=new URL(e,o);if(self[t].moduleMap[s])return a(self[t].moduleMap[s]);const l=new Blob([`import * as m from '${s}';`,`${t}.moduleMap['${s}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){r(new Error(`Failed to import: ${e}`)),n(i)},onload(){a(self[t].moduleMap[s]),n(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("/assets/");const w=s("auth"),R={components:{Menu:l,MenuButton:i,MenuItems:c,MenuItem:d,ChevronDownIcon:u},data:()=>({}),computed:r({},w.mapGetters({profile:"profile",isAuthenticated:"isAuthenticated"})),methods:r(r({},w.mapActions({logout:"logout"})),{handleLogout(){this.logout().then((()=>{this.$router.push({name:"Home"})}))}})},x={class:"px-4 py-1 bg-gray-900"},D={class:"container flex place-items-center justify-between mx-auto"},N=p("img",{class:"w-auto",src:"/assets/logo.71618444.svg",alt:"Problematic Evaly"},null,-1),C={class:"py-2"},P={class:"list-none"},j={key:0,class:"inline-block"},M=E("Login"),V={class:"px-1 py-1"},F=E(" Profile "),H=E(" Orders "),K={class:"px-1 py-1"};R.render=function(e,t,a,o,n,r){const s=m("router-link"),l=m("ChevronDownIcon"),i=m("MenuButton"),c=m("MenuItem"),d=m("MenuItems"),u=m("Menu");return h(),f("header",x,[p("div",D,[p("div",null,[p(s,{to:{name:"Home"},class:"block w-20"},{default:g((()=>[N])),_:1})]),p("nav",C,[p("ul",P,[e.isAuthenticated?(h(),f(u,{key:1,as:"li",class:"relative inline-block z-50"},{default:g((()=>[p(i,{class:"inline-flex justify-center w-full px-3 py-1 text-sm text-white bg-red-700 rounded-full focus:outline-none"},{default:g((()=>[E(" Welcome, "+y(e.profile.first_name)+" ",1),p(l,{class:"w-5 h-5 ml-2 -mr-1","aria-hidden":"true"})])),_:1}),p(_,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:g((()=>[p(d,{class:"absolute right-0 w-56 mt-2 origin-top-right bg-white divide-y divide-gray-100 rounded-md shadow-sm ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:g((()=>[p("div",V,[p(c,null,{default:g((({active:e})=>[p(s,{to:"/profile",class:[e?"bg-red-700 text-white":"text-gray-900","block transition-all ease-in-out duration-200 rounded-md px-4 py-2 text-sm"]},{default:g((()=>[F])),_:2},1032,["class"])])),_:1}),p(c,null,{default:g((({active:e})=>[p(s,{to:{name:"Orders"},class:[e?"bg-red-700 text-white":"text-gray-900","block transition-all ease-in-out duration-200 rounded-md px-4 py-2 text-sm"]},{default:g((()=>[H])),_:2},1032,["class"])])),_:1})]),p("div",K,[p(c,null,{default:g((({active:e})=>[p("button",{class:[e?"bg-red-700 text-white":"text-gray-900","block w-full text-left transition-all ease-in-out duration-200 rounded-md px-4 py-2 text-sm"],onClick:t[1]||(t[1]=(...e)=>r.handleLogout&&r.handleLogout(...e))}," Logout ",2)])),_:1})])])),_:1})])),_:1})])),_:1})):(h(),f("li",j,[p(s,{to:{name:"Login"},class:"inline-block transition-all text-sm text-white py-1 px-3 bg-red-700 rounded-full"},{default:g((()=>[M])),_:1})]))])])])])};const U={};U.render=function(e,t,a,o,n,r){return k(e.$slots,"default")};const B={},$=S('<div class="py-5"></div><div class="text-center text-gray-500 bg-white text-sm py-3 fixed left-0 bottom-0 right-0"> Crafted by <a class="border-b-2 text-red-700" href="https://www.facebook.com/AminulBD">Aminul Islam</a>, Hosted in <a class="border-b-2 text-red-700" href="https://pages.github.com/">GitHub Pages</a> and fucking source code can be found <a class="border-b-2 text-red-700" href="https://github.com/AminulBD/evaly.me"> here</a>. </div>',2);B.render=function(e,t,a,o,n,r){return $};const G={};G.render=function(e,t){const a=m("router-view");return h(),f(a)};const Y=s("auth"),J={components:{Header:R,Content:U,Footer:B,DefaultView:G},data:()=>({}),computed:r({},Y.mapGetters({refreshToken:"refreshToken",tokenValidity:"tokenValidity"})),mounted(){setInterval((()=>{(new Date).getTime()>parseInt(this.tokenValidity)&&this.refreshSession(this.refreshToken)}),5e3)},methods:r({},Y.mapActions({refreshSession:"refreshToken"}))};let z;J.render=function(e,t,a,o,n,r){const s=m("Header"),l=m("DefaultView"),i=m("Content"),c=m("Footer");return h(),f(b,null,[p(s),p(i,null,{default:g((()=>[p(l)])),_:1}),p(c)],64)};const q={},Q=function(e,t){if(!t)return e();if(void 0===z){const e=document.createElement("link").relList;z=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in q)return;q[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":z,t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((e,t)=>{o.addEventListener("load",e),o.addEventListener("error",t)})):void 0}))).then((()=>e()))},W=[{path:"/",name:"Home",component:()=>Q((()=>__import__("./Home.51f562b8.js")),["/assets/Home.51f562b8.js","/assets/vendor.6a843411.js"])},{path:"/profile",name:"Profile",component:()=>Q((()=>__import__("./Profile.698b8278.js")),["/assets/Profile.698b8278.js","/assets/vendor.6a843411.js"])},{path:"/orders",name:"Orders",component:()=>Q((()=>__import__("./Orders.ce62fce6.js")),["/assets/Orders.ce62fce6.js","/assets/vendor.6a843411.js"])},{path:"/auth",name:"Auth",component:G,children:[{path:"login",name:"Login",component:()=>Q((()=>__import__("./Login.73da0df8.js")),["/assets/Login.73da0df8.js","/assets/Login.5e385bb0.css","/assets/vendor.6a843411.js"])}]}],X=T({history:O(),routes:W}),Z=v.create({baseURL:"https://evaly.aminul.workers.dev",timeout:6e4});localStorage.ACCESS_TOKEN&&localStorage.ACCESS_TOKEN.length>5&&(Z.defaults.headers.common.Authorization="Bearer "+localStorage.ACCESS_TOKEN),Z.defaults.headers.get.Accept="application/json",Z.defaults.headers.post.Accept="application/json",Z.defaults.headers.post["Content-Type"]="application/json";const ee={first_name:"Guest",last_name:"User"};var te=A({modules:{auth:{namespaced:!0,state:(()=>{const e=localStorage.ACCESS_TOKEN,t=localStorage.REFRESH_TOKEN,a=localStorage.TOKEN_VALIDITY,o=localStorage.USER_PROFILE;return{profile:o&&o.length>3?JSON.parse(o):ee,accessToken:e||null,refreshToken:t||null,tokenValidity:a||null,isAuthenticated:e&&e.length>4}})(),mutations:{LOGIN_USER:(e,t)=>{e.accessToken=t.accessToken,e.refreshToken=t.refreshToken,e.tokenValidity=t.tokenValidity,e.isAuthenticated=t.accessToken&&t.accessToken.length>4},MAKE_PROFILE:(e,t)=>{e.profile=t},LOGOUT_USER:e=>{e.profile=ee,e.accessToken=null,e.refreshToken=null,e.isAuthenticated=!1}},actions:{login:({dispatch:e,commit:t},a)=>Z.post("/eauth/api/v1/auth/login",a).then((({data:a})=>{const o=(new Date).getTime()+2e6;localStorage.ACCESS_TOKEN=a.data.access_token,localStorage.REFRESH_TOKEN=a.data.refresh_token,localStorage.TOKEN_VALIDITY=o,t("LOGIN_USER",{accessToken:a.data.access_token,refreshToken:a.data.refresh_token,tokenValidity:o}),e("fetchProfile",a.data.access_token)})),refreshToken:({dispatch:e,commit:t},a=null)=>(a=null!==a?a:localStorage.REFRESH_TOKEN,Z.post("/eauth/api/v1/auth/token/refresh",{refresh_token:a}).then((({data:a})=>{const o=(new Date).getTime()+2e6;localStorage.ACCESS_TOKEN=a.data.access_token,localStorage.REFRESH_TOKEN=a.data.refresh_token,localStorage.TOKEN_VALIDITY=o,t("LOGIN_USER",{accessToken:a.data.access_token,refreshToken:a.data.refresh_token,tokenValidity:o}),e("fetchProfile",a.data.access_token)}))),fetchProfile:({commit:e},t=null)=>(t&&t.length>0&&(Z.defaults.headers.common.Authorization="Bearer "+t),Z.get("/eauth/api/v1/auth/profile").then((({data:t})=>{localStorage.USER_PROFILE=JSON.stringify(t.data),e("MAKE_PROFILE",t.data)}))),logout:({commit:e})=>(localStorage.removeItem("ACCESS_TOKEN"),localStorage.removeItem("REFRESH_TOKEN"),localStorage.removeItem("USER_PROFILE"),localStorage.removeItem("TOKEN_VALIDITY"),e("LOGOUT_USER"),Z.post("/eauth/api/v1/auth/logout").then((()=>{localStorage.removeItem("ACCESS_TOKEN"),localStorage.removeItem("REFRESH_TOKEN"),localStorage.removeItem("USER_PROFILE"),localStorage.removeItem("TOKEN_VALIDITY"),e("LOGOUT_USER")})))},getters:{profile:e=>e.profile,isAuthenticated:e=>e.isAuthenticated,accessToken:e=>e.accessToken,refreshToken:e=>e.refreshToken,tokenValidity:e=>e.tokenValidity}}}});var ae={common:{12:{16:"Victory Day",25:"Christmas Day"},"02":{21:"Language Martyrs' Day"},"03":{17:"Sheikh Mujibur Rahman's Birthday",26:"Independence Day"},"04":{14:"Bengali New Year"},"05":{"01":"Labour Day"},"08":{15:"National Mourning Day"}},years:{2018:{},2019:{},2020:{10:{26:"Vijaya Dashami",30:"Eid-e-Milad un-Nabi"},"04":{"09":"Shab e-Barat"},"05":{20:"Laylat al-Qadr",22:"Jumatul Bidah",24:"Eid ul-Fitr Holiday",25:"Eid ul-Fitr",26:"Eid ul-Fitr Holiday","07":"Buddha Purnima"},"07":{31:"Eid ul-Adha Holiday"},"08":{11:"Shuba Janmashtami",29:"Ashura","01":"Eid ul-Adha","02":"Eid ul-Adha Holiday"}},2021:{10:{15:"Vijaya Dashami",19:"Eid-e-Milad un-Nabi"},"03":{29:"Shab e-Barat"},"05":{10:"Laylat al-Qadr",13:"Eid ul-Fitr Holiday",14:"Eid ul-Fitr",15:"Eid ul-Fitr Holiday",26:"Buddha Purnima","07":"Jumatul Bidah"},"07":{20:"Eid ul-Adha Holiday",21:"Eid ul-Adha",22:"Eid ul-Adha Holiday"},"08":{19:"Ashura",30:"Shuba Janmashtami"}}}};const oe=I(J);oe.mixin({methods:{holidays(){const e={},t=["01","02","03","04","05","06","07","08","09","10","11","12"];return Object.keys(ae.years).forEach((a=>{t.forEach((t=>{var o,n;const s=r(r({},null!=(o=ae.years[a][t])?o:{}),null!=(n=ae.common[t])?n:{});Object.entries(s).forEach((([o,n])=>{e[L(`${a}-${t}-${o}`).unix()]=n}))}))})),e},formatDate:e=>L(e).format("DD/MM/YYYY hh:mm A"),workingDays(e,t=null){const a=L(e),o=L(null!=t?t:L()),n=a.unix(),r=o.unix(),s=a.diff(o,"day"),l=Object.keys(this.holidays()).filter((e=>{const t=parseInt(e);return t>=n&&t<=r}));return Math.abs(s)-l.length}}}),oe.use(te),oe.use(X),oe.mount("#app");export{Z as c};
